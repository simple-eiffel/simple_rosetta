# S05-CONSTRAINTS.md
## simple_rosetta - Design Constraints

**Generation Type:** BACKWASH (reverse-engineered from implementation)
**Date:** 2026-01-23

---

## 1. API Constraints

| Constraint | Rule |
|------------|------|
| Rate Limiting | 1 request per second (politeness) |
| Pagination | Use cmcontinue for >500 results |
| User Agent | Standard HTTP client headers |
| Encoding | UTF-8 expected from API |

## 2. Database Constraints

| Constraint | Rule |
|------------|------|
| Engine | SQLite via simple_sql |
| Task Name | UNIQUE, NOT NULL |
| Solution | UNIQUE(task_id, language) |
| Foreign Key | solution.task_id references tasks.id |

## 3. Wiki Parsing Constraints

| Constraint | Rule |
|------------|------|
| Language Header | Pattern: `=={{header|LanguageName}}==` |
| Code Blocks | `<lang>...</lang>` or `<syntaxhighlight>` |
| Case Sensitivity | Language names case-sensitive |
| Multi-Solution | Some tasks have multiple solutions per language |

## 4. Task Constraints

| Constraint | Rule |
|------------|------|
| Name | Non-empty string |
| ID | Auto-generated by database |
| Languages | Tracked as list |
| has_eiffel | Boolean flag |

## 5. Solution Constraints

| Constraint | Rule |
|------------|------|
| task_id | Must reference existing task |
| language | Non-empty string |
| code | Non-empty string |
| source | 'rosetta', 'generated', or 'community' |

## 6. Validation Constraints

| Constraint | Rule |
|------------|------|
| Compile | ec -batch for Eiffel validation |
| Contract Check | Full DBC assertions enabled |
| Timeout | Configurable compilation timeout |

## 7. Import Constraints

| Constraint | Rule |
|------------|------|
| Task List | Paginated API call |
| Task Content | Raw wiki format |
| Solutions | Extracted per-language |
| Progress | Callback for UI updates |

## 8. Export Constraints

| Constraint | Rule |
|------------|------|
| CSV Format | Standard CSV with headers |
| Escaping | Quoted fields for special chars |
| Encoding | UTF-8 output |

## 9. Priority Languages (from Research)

| Priority | Language | Rosetta Coverage |
|----------|----------|------------------|
| 1 | Python | ~900 tasks |
| 2 | Java | ~700 tasks |
| 3 | C | ~600 tasks |
| 4 | C# | ~400 tasks |
| 5 | JavaScript | ~500 tasks |

## 10. Target Metrics (from Research)

| Metric | Target |
|--------|--------|
| Tasks imported | 1,338 |
| Eiffel solutions | 1,000 |
| Validation rate | >70% |
| Instruction pairs | 5,000 |
